- Promise对象代表一个异步操作，有三种状态：pending(进行中)、fulfilled(已成功)、rejected(已失败)
- 状态改变只能从pending变成fulfilled或者从pending变成rejected，改变之后状态就凝固了，这时就称为resolved(已定型)
- Promise的缺点: 一旦新建立即执行，无法中途取消；如果不设置回调函数，内部错误不会反映到外部；处于pending状态时无法知道是刚开始还是即将完成
- 基本用法：`new Promise((resolve,reject) => {})`, resolve为成功时执行的回调函数，reject为失败时执行的回调函数
- Promise的一些方法:
  - `then(func1, func2)`: func1为resolved状态的回调函数，func2为rejected状态的回调函数
  - `catch(func)`: `catch(func)`是`then(null, rejection)`或`then(undefined, rejection)`的别名，用于指定出错时的回调函数，在后面使用catch而不是then的第二个参数，有利于发现前面的所有错误
  - `finally(func)`: 不接受任何参数，用于指定无论变成resolved或者rejected状态都会执行的回调函数，在resolve和reject之前执行
  - `all([p1, p2, p3, ...])`: 用于将多个Promise实例转化为新的Promise实例，p1, p2, p3, ...都是Promise实例，all的参数可以不是数组，但必须具有Iterator接口
    - 只有所有实例的状态都变成fulfilled，p的状态才会变成fulfilled，并且将所有实例的返回值组成数组传递给p的回调函数
    - 只要有一个实例的状态变成rejected，p的状态就会变成rejected，并且将第一个被reject的实例的返回值传递给p的回调参数
  - `race([p1, p2, p3, ...])`: 用于将多个Promise实例转化为新的Promise实例，p1, p2, p3, ...都是Promise实例
    - 只要有一个实例的状态变成fulfilled时，返回该实例，只要有一个实例的状态变成rejected，返回该实例
    - 即返回率先改变状态的实例
  - `allSettled()`不关心异步操作是否成功，等所有异步操作完成后才会执行后面的操作，ES2020引入
  - `any()`目前只是一个提案，与`race()`类似，只要有一个实例返回fulfilled状态，包装实例就返回fulfilled状态，所有实例都返回rejected包装实例返回rejected状态，与`race()`不同在于不会因为返回第一个rejected状态就停止
  - `resolve()`
    - 参数是一个Promise实例，原封不动返回
    - 没有参数，返回一个Promise实例，状态为resolved
    - 参数为非thenable对象或不是对象，返回Promise实例，参数传给该实例的resolve方法，执行后状态为resolved
    - 参数为thenable对象(即对象内部有then方法)，返回一个Promise对象并执行参数对象的内部方法
  - `reject()`
    - 返回一个的Promise实例，与`resolve()`不同，参数都会传给该实例的reject()方法，执行后状态为rejected
